// Generated by CoffeeScript 1.6.3
(function() {
  var Brick, addBrick, board, clearBoard, ctx, drawBoard, drawLL, drawLine, test;

  ctx = $('#game')[0].getContext('2d');

  Brick = (function() {
    function Brick(x, y, color) {
      this.x = x;
      this.y = y;
      this.color = color;
    }

    return Brick;

  })();

  board = [];

  drawBoard = function() {
    var brick, _i, _len, _results;
    _results = [];
    for (_i = 0, _len = board.length; _i < _len; _i++) {
      brick = board[_i];
      ctx.fillStyle = brick.color;
      _results.push(ctx.fillRect((brick.x - 1) * 40 + 2, (brick.y - 1) * 40 + 2, 38, 38));
    }
    return _results;
  };

  addBrick = function(x, y, color) {
    return board.push(new Brick(x, y, color));
  };

  drawLine = function(x, y, rot) {
    var c, i, _i, _j;
    c = "#48f";
    if (!(rot % 2)) {
      for (i = _i = -1; _i <= 2; i = ++_i) {
        addBrick(x + i, y, c);
      }
    } else {
      for (i = _j = -1; _j <= 2; i = ++_j) {
        addBrick(x, y + i, c);
      }
    }
    return drawBoard();
  };

  drawLL = function(x, y, rot) {
    var c, i, _i, _j, _k, _l;
    c = "#00f";
    if (rot % 4 === 0) {
      for (i = _i = -1; _i <= 2; i = ++_i) {
        if (i < 2) {
          addBrick(x + i, y, c);
        } else {
          addBrick(x + i - 1, y - 1, "#f00");
        }
      }
    }
    if (rot % 4 === 1) {
      for (i = _j = -1; _j <= 2; i = ++_j) {
        if (i < 2) {
          addBrick(x, y + i, c);
        } else {
          addBrick(x + 1, y + i - 1, "#f00");
        }
      }
    }
    if (rot % 4 === 2) {
      for (i = _k = -1; _k <= 2; i = ++_k) {
        if (i < 2) {
          addBrick(x + i, y, c);
        } else {
          addBrick(x + i - 3, y + 1, "#f00");
        }
      }
    }
    if (rot % 4 === 3) {
      for (i = _l = -1; _l <= 2; i = ++_l) {
        if (i < 2) {
          addBrick(x, y + i, c);
        } else {
          addBrick(x - 1, y + i - 3, "#f00");
        }
      }
    }
    return drawBoard();
  };

  clearBoard = function() {
    board = [];
    return ctx.clearRect(0, 0, 400, 800);
  };

  test = function(f) {
    var pos, rot;
    pos = 2;
    rot = 0;
    return setInterval(function() {
      clearBoard();
      f(5, pos, rot);
      rot += 1;
      if (pos === 20) {
        return pos = 2;
      }
    }, 500);
  };

  test(drawLL);

}).call(this);
